---
- hosts: k8master  # Assuming you're running Ansible locally
  connection: local
  gather_facts: no  # Disable gathering facts
  become: yes
  vars:
    anisble_user: root
    build_number: "{{ lookup('env', 'BUILD_NUMBER') }}"
     
  tasks:  
    - name: Docker build
      shell:
        cmd: |
          cd {{ workspace }}
          docker build --file Dockerfile --tag asimbilal2020/finalproject:{{ build_number }} .
      vars:
        workspace: "{{ lookup('env', 'WORKSPACE') }}"
